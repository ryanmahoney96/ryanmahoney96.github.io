



<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
	
	<link rel = "stylesheet" href = "css/styles.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
	
	<title>The Prog Blog</title>
  </head>
  
  <body>
   <div id = "container">
		<nav id = "header" class = "navbar navbar-inverse navbar-fixed-top">
			<div id = "navStyle" class = "container-fluid">
				<div class = "navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
						<span class = "glyph glyphicon glyphicon-menu-hamburger"></span>
					 </button>
					<a class = "navbar-brand" title = "Home Page" id = "navTitle" href = "http://ryanmahoney96.github.io/progblog/home.html">
						<h2 id = "homeNav" class = "logo">The Prog Blog</h2>
					</a>
				</div>
				<div class = "collapse navbar-collapse" id = "myNavbar">
					<ul  class = "nav navbar-nav">
						<li><a href="http://ryanmahoney96.github.io/progblog/commentRecord.html">Comment</a></li> 
					</ul>
				</div>
			</div>
		</nav>	
		<h2>...</h2>
		
		
		<!----------------------------------------------------------------------->
		<div id = "body">
			
			<div id = "commentForm" class = "textbox container">
				<h1>Give me Feedback!</h1>
				
				<fieldset>
					<legend>
						Leave a comment about one of my writings
					</legend>
					
					<div class = "form-group">
							<label for = "userName">Enter in Your Name:</label>
							<input type = "text" class = "form-control" id = "userName" placeholder = "Your Name"/>
							
					</div>
						
					<div class = "form-group">
						<label for = "targetButton">What was I writing about?</label>
						
						<div class = "dropdown">
							<button id = "targetButton" class = "btn dropdown-toggle" type = "button" data-toggle = "dropdown">
								Subject
								<span class = "glyphicon glyphicon-circle-arrow-down"></span>
							</button>
							
							<ul id = "pieceDDList" class = "dropdown-menu">
																								
							</ul>	
						</div>
						
					</div>
					
					<label for = "commentContent">Your comments:</label>
					
					<div>
						<textarea id = "commentContent" rows = "12" cols = "90" placeholder = "Your Comment(s)"></textarea>
					</div>
					
					<button id = "submitButton" class = "btn" type = "button">
						Leave Comment
					</button>
					
				</fieldset>
			</div>
		
			
			
		</div> <!--end of special div for body-->
		
		<div class = "spacer2"></div>
		
		<footer class = "footer">
			<div class = "container">
				<h1>PROG BLOG<br></h1>
				<a href="mailto:ryan.mahoney96@gmail.com" target = "_blank">Contact Me</a>
			</div>
			
			<div class = "spacer2"></div>

		</footer>
	</div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

	<script src="https://cdn.firebase.com/js/client/2.3.2/firebase.js"></script>
	
	<script>
	
		$(document).ready(function() {
			console.log("DOM loaded");
			
			var pieceRef = new Firebase("https://progresscomments.firebaseio.com/");
						
			var name = null;
			var target = null;
			
			addPieces();
			
			function addPieces () {
				pieceRef.orderByKey().once("value", function(snapshot){
                    console.log("here");
                    snapshot.forEach(function(childSnapshot){
                        
                        var piece = childSnapshot.val();
                        
						console.log(piece.name);
						
                        var pieceLi = $("<li><a href = '#' class = 'pieceTarget'>" + piece.name + "</a></li>");
						
						pieceLi.attr("id", piece.name);

                        var pieceList = $("#pieceDDList");
						
						pieceList.append(pieceLi);
                    });
					
					$(".pieceTarget").on("click", function(){
						$("#targetButton").text($(this).text());
						target = $(this).text();
					});
                });	
			}
						
			$("#submitButton").on("click", function(){
				
				var comment = $("#commentContent").val();
				var name = $("#userName").val();
								
				console.log(comment);
							
				if(name == ""){
					alert("Please enter your name, dude");
				}
				else if(comment == "" || comment == null){
					alert("Please fill in a comment, bruh");
				}
				else if(target == "" || target == null){
					alert("What are you commenting on???");
				}
				else {
				
					addToFirebase(name, comment);
					
					window.open("home.html", "_self");
					alert("Thank you, it means so much;D");
				}
			});
			
			function addToFirebase (name, comment) {
				var test = "";
				
				pieceRef.orderByKey().equalTo(target).once('value', function(snapshot){
						var addRef = new Firebase ("https://progresscomments.firebaseio.com/" + target);
						addRef.push({"commenterName": name,  "comment":comment});
				});
								
			}
			
				
		});
	
	</script>
	
  </body>
</html>






